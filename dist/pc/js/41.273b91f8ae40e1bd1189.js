webpackJsonp([41],{"8Tp1":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("VU/8")(null,null,!1,null,null,null).exports;var s={name:"reg",data:function(){return{ruleForm:{mobile:"",captcha:"",password:"",repassword:""},rules:{},show:!0,count:"",timer:null,layerMask:0,text_tip:""}},created:function(){this._user_agreement()},methods:{_SmsSend:function(){var t=this;this.$com.checkPhone(this.ruleForm.mobile)?this.$api.SmsSend(this.ruleForm.mobile,"register").then(function(e){t.showbtn=!1,1==e.code?(t.send(),t.$com.showToast(e.msg,"success"),t.ruleForm.captcha=e.data):t.$com.showToast(e.msg)}):this.$com.showToast("请输入正确的手机号")},_user_agreement:function(){var t=this;this.$api.getConfig().then(function(e){1==e.code&&(t.text_tip=e.data.user_agreement)})},send:function(){var t=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){t.count>0&&t.count<=60?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)},1e3))},gonext:function(){var t=this;""==this.ruleForm.mobile?this.$com.showToast("请输入手机号"):""==this.captcha?this.$com.showToast("请输入验证码"):""==this.ruleForm.password?this.$com.showToast("请输入密码"):""==this.ruleForm.repassword?this.$com.showToast("请输入重复密码"):this.ruleForm.password.length<6||this.ruleForm.password.length>12?this.$com.showToast("密码长度介于6～12位之间"):this.ruleForm.password!=this.ruleForm.repassword?this.$com.showToast("两次密码不一致"):this.$api.Register(this.ruleForm.mobile,this.ruleForm.captcha,this.ruleForm.password,this.ruleForm.repassword).then(function(e){1==e.code?(t.$com.showToast("注册成功,正在为您自动登录...","success"),t.$com.setCookie("user_tpc",e.data.userinfo.token),setTimeout(function(){t.$router.push("/")},2e3)):t.$com.showToast(e.msg||"稍后再试")})},backlogin:function(){this.$router.push("/login")},goAgree:function(){this.$alert(this.text_tip,"",{confirmButtonText:"知道了",dangerouslyUseHTMLString:!0,callback:function(t){}})},accountinput:function(){this.ruleForm.mobile=this.ruleForm.mobile.replace(/[^\d]/g,"")},captchainput:function(){this.ruleForm.captcha=this.ruleForm.captcha.replace(/[^\d]/g,"")}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login_box"},[s("div",{staticClass:"login_head",on:{click:function(e){return t.$router.push("/")}}},[s("img",{attrs:{src:o("OAsy"),alt:""}})]),t._v(" "),s("el-form",{ref:"form",staticClass:"loginform",attrs:{model:t.ruleForm,rules:t.rules}},[s("div",{staticClass:"logintitle"},[s("div",{staticClass:"account"},[t._v("注册")]),t._v(" "),s("div",{staticClass:"phone_box",on:{click:t.backlogin}},[t._v("已有账号？"),s("span",{staticClass:"login"},[t._v("登录"),s("span",{staticClass:"iconfont iconxiangyou1"})])])]),t._v(" "),s("el-form-item",{attrs:{prop:"mobile"}},[s("el-input",{attrs:{placeholder:"手机号",clearable:"",maxlength:"11",autocomplete:"off"},on:{input:t.accountinput},model:{value:t.ruleForm.mobile,callback:function(e){t.$set(t.ruleForm,"mobile",e)},expression:"ruleForm.mobile"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"captcha"}},[s("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入验证码",autocomplete:"off",maxlength:"4",clearable:""},on:{input:t.captchainput},model:{value:t.ruleForm.captcha,callback:function(e){t.$set(t.ruleForm,"captcha",e)},expression:"ruleForm.captcha"}}),t._v(" "),s("el-button",{staticStyle:{width:"28%"},attrs:{icon:"el-icon-mobile-phone",type:"text",disabled:t.disabled=!t.show},on:{click:t._SmsSend}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[t._v("获取验证码")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v(t._s(t.count)+" s")])])],1),t._v(" "),s("el-form-item",{attrs:{prop:"newpassword"}},[s("el-input",{attrs:{placeholder:"新密码",type:"password",maxlength:"12",clearable:"",autocomplete:"off"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"repassword"}},[s("el-input",{attrs:{placeholder:"重复新密码",type:"password",maxlength:"12",clearable:"",autocomplete:"off"},model:{value:t.ruleForm.repassword,callback:function(e){t.$set(t.ruleForm,"repassword",e)},expression:"ruleForm.repassword"}})],1),t._v(" "),s("div",{staticClass:"login_btn",on:{click:t.gonext}},[t._v("同意以下协议并注册")]),t._v(" "),s("div",{staticClass:"login_pass",on:{click:t.goAgree}},[t._v("用户协议")])],1)],1)},staticRenderFns:[]};var a=o("VU/8")(s,r,!1,function(t){o("ElD5")},"data-v-08a040d2",null);e.default=a.exports},ElD5:function(t,e){}});