webpackJsonp([4],{"8CKj":function(t,i,e){"use strict";var s=e("vpTW"),a=e.n(s),n=e("Hldf");var o=function(t){e("9P5q")},l=e("VU/8")(a.a,n.a,!1,o,"data-v-2bcecd40",null);i.default=l.exports},"9P5q":function(t,i){},Hldf:function(t,i,e){"use strict";var s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-dialog",{attrs:{title:"网咖地图",visible:t.visible,width:"1200px",show:t.show,center:""},on:{"update:visible":function(i){t.visible=i},close:function(i){return t.$emit("update:show",!1)}}},[e("iframe",{staticClass:"amap",attrs:{src:"https://uri.amap.com/marker?position="+t.info.lng+","+t.info.lat+"&name="+t.info.name+"&src="+t.info.address+"&coordinate=gaode&callnative=0",frameborder:"0"}})])},staticRenderFns:[]};i.a=s},TIqh:function(t,i){},hRxR:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("rcEL"),a=e("s85o"),n=e("8CKj"),o={name:"competition",data:function(){return{netlist:[],totalPages:0,per_page:10,city:"",lat:0,lng:0,recommend:0,circle:"",keyword:"",district:"",tabs:[{name:"默认排序",order:"1"},{name:"智能排序",order:"2"},{name:"评分最高",order:"3"}],tab:"",order:1,showdata:!1,showlist:!0,visibleMap:!1,info:{}}},components:{CitySelect:s.a,pcpaging:a.a,amap:n.default},created:function(){this.city=this.$com.getCookies("pccity")||"北京",this._GetBarList()},methods:{_GetBarList:function(){var t=this;this.$api.GetBarList(this.page,this.keyword,this.city,this.lat,this.lng,this.recommend,this.label,this.district,this.circle,this.per_page,this.order).then(function(i){t.showdata=!0,t.showlist=!1,1==i.code&&(t.netlist=i.data.data,t.totalPages=i.data.total/t.per_page)})},getPresentPage:function(t){this.showlist=!0,this.page=t,this._GetBarList()},labeledfn:function(t){this.showlist=!0,this.page=1,this.label=t,this._GetBarList()},cityareafn:function(t){this.showlist=!0,this.page=1,this.district=t,this._GetBarList()},removeAll:function(t){this.showlist=!0,this.label="",this.district="",this.page=1,this._GetBarList()},removecity:function(t){this.showlist=!0,this.district=t,this.page=1,this._GetBarList()},removelabel:function(t){this.showlist=!0,this.label=t,this.page=1,this._GetBarList()},allarea:function(t){console.log(t),this.district=t,this.page=1,this._GetBarList()},alllabel:function(t){console.log(t),this.label=t,this.page=1,this._GetBarList()},orderby:function(t,i){this.showlist=!0,this.tab=t,this.order=i,this.page=1,this._GetBarList()},go_detail:function(t){this.$router.push({path:"/competitiondetail/"+t})},showmap:function(t,i){this.visibleMap=!0,this.info=i}}},l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"cbox"},[e("city-select",{on:{removeall:t.removeAll,labeled:t.labeledfn,cityarea:t.cityareafn,removecity:t.removecity,removelabel:t.removelabel,allarea:t.allarea,alllabel:t.alllabel}}),t._v(" "),e("div",{staticClass:"listbox"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showlist,expression:"showlist"}],staticClass:"listtab"},t._l(t.tabs,function(i,s){return e("span",{key:i.order,class:{ativetab:t.tab==s},on:{click:function(e){return t.orderby(s,i.order)}}},[t._v(t._s(i.name))])}),0),t._v(" "),t.showdata&&t.netlist.length?e("div",{staticClass:"list"},t._l(t.netlist,function(i,s){return e("div",{key:i.id,staticClass:"recmmentitem",on:{click:function(e){return t.go_detail(i.id)}}},[e("div",{staticClass:"rec_img"},[e("img",{attrs:{src:i.image,alt:""}})]),t._v(" "),e("div",{staticClass:"rec_right"},[e("div",{staticClass:"rec_name"},[t._v(t._s(i.name))]),t._v(" "),e("div",{staticClass:"starbox"},t._l(parseInt(i.star),function(t){return e("span",{staticClass:"iconfont iconstar-fill iconactive"})}),0),t._v(" "),e("div",{staticClass:"typebox"},t._l(i.label_ids,function(i){return e("span",[t._v(t._s(i))])}),0),t._v(" "),e("div",{staticClass:"rec_address single-line-text"},[e("span",{staticClass:"el-icon-location-outline"}),t._v(t._s(i.address))]),t._v(" "),e("div",{staticClass:"rec_address map",on:{click:function(e){return e.stopPropagation(),t.showmap(s,i)}}},[t._v("查看地图")])])])}),0):t._e(),t._v(" "),t.showdata&&0==t.netlist.length?e("div",{staticClass:"list"},[e("NoData",{attrs:{text:"暂无符合条件的商家"}})],1):t._e(),t._v(" "),t.netlist.length?e("pcpaging",{staticClass:"pcpaging",attrs:{totalPages:t.totalPages,pageSize:t.per_page,scrollTo:200},on:{presentPage:t.getPresentPage}}):t._e()],1),t._v(" "),Object.keys(t.info).length?e("amap",{attrs:{show:t.visibleMap,info:t.info},on:{"update:show":function(i){t.visibleMap=i}}}):t._e()],1)},staticRenderFns:[]};var r=e("VU/8")(o,l,!1,function(t){e("TIqh")},"data-v-06f4c71a",null);i.default=r.exports},vpTW:function(t,i){t.exports={data:function(){var t=this,i=this;return{visible:this.show,zoom:12,address:"",events:{click:function(t){var e=t.lnglat,s=e.lng,a=e.lat;i.lng=s,i.lat=a,new AMap.Geocoder({radius:1e3,extensions:"all"}).getAddress([s,a],function(t,e){"complete"===t&&"OK"===e.info&&e&&e.regeocode&&(i.address=e.regeocode.formattedAddress,i.$nextTick())})}},lng:0,lat:0,windows:[{position:[this.info.lng,this.info.lat],content:"Hi! I am here!",visible:!0,events:{close:function(){console.log("close infowindow1")}}}],slotWindow:{position:[this.info.lng,this.info.lat]},currentWindow:{position:[this.info.lng,this.info.lat],content:"",events:{},visible:!1},plugin:[{pName:"MapType",defaultType:0,events:{init:function(t){console.log(t)}}},{pName:"ToolBar",events:{init:function(t){console.log(t)}}}],componentMarker:{position:[this.info.lng,this.info.lat],contentRender:function(i,e){return i("div",{style:{background:"#80cbc4",whiteSpace:"nowrap",border:"solid #ddd 1px",color:"#f00"},on:{click:function(){var i=t.renderMarker.position;t.renderMarker.position=[i[0]+.002,i[1]-.002]}}},["<div>1233554</div>"])}},window:{position:[this.info.lng,this.info.lat],content:'<div class="markerbox">\n<div class="name">'+this.info.name+'</div>\n<div class="address">'+this.info.address+'</div>\n<div class="address synopsis">'+this.info.synopsis+'</div>\n<div class="goto"><a href="" target="_blank">公交/驾车路线查询»</a></div>\n</div>'}}},created:function(){console.log(this.info)},watch:{show:function(){this.visible=this.show}},props:{show:{type:Boolean,default:!1},info:{type:Object,default:{}}}}}});