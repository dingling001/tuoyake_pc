webpackJsonp([41],{C6s1:function(e,i){},P6Hp:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"fbox"},[e._m(0),e._v(" "),t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"message"}},[t("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请在这里留下您的宝贵意见","show-word-limit":"",maxlength:"200"},model:{value:e.ruleForm.message,callback:function(i){e.$set(e.ruleForm,"message",i)},expression:"ruleForm.message"}})],1),e._v(" "),t("el-form-item",{ref:"files",staticClass:"uploadbox",attrs:{prop:"files"}},[t("el-upload",{staticClass:"upload",attrs:{name:"file","on-preview":e.handlePictureCardPreview,action:"",accept:"image/jpeg,image/png,image/gif","file-list":e.ruleForm.files,limit:3,"list-type":"picture-card","show-file-list":!0,"before-remove":e.beforeRemove,"on-exceed":e.handleFileExceed,"on-change":function(i,t){return e.handleFileChange(i,t)},"on-remove":function(i,t){return e.handleFileRemove(i,t)},"http-request":e.handleUpload}},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"trigger"},slot:"trigger"})])],1),e._v(" "),t("el-button",{staticClass:"fbtn",on:{click:e.feedback_fn}},[e._v("提交评价")])],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"iconbox"},[i("div",{staticClass:"name"},[this._v("意见反馈")])])}]};var a=t("VU/8")({name:"myFeedback",data:function(){return{ruleForm:{message:"",files:[]},attaVisible:!1,rules:{},dialogImageUrl:"",dialogVisible:!1,imgs:[]}},methods:{beforeRemove:function(e,i){return this.$confirm("确定移除 "+e.name+"？")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleFileChange:function(e,i){this.handleFileOpt(e,i)},handleFileExceed:function(e,i){this.$com.showToast("当前限制选择 3  张图片，请删除后继续上传","warning",1e3)},handleFileOpt:function(e,i){this.ruleForm.files=i,void 0!==this.ruleForm.files&&(this.imgs.splice(i.indexOf(e),1),this.ruleForm.files.length>0?this.$refs.files.clearValidate("files"):this.$refs.files.validate("files"))},handleFileRemove:function(e,i){this.handleFileOpt(e,i),this.$message({message:"刪除成功！",type:"warning",during:2e3})},handleUpload:function(e){var i=e.file,t="image/jpeg"==i.type||"image/png"==i.type||"image/gif"==i.type,s=i.size/1024/1024<2;t?s?this._CommonUpload(i):this.$com.showToast("上传文件大小不能超过 2MB！","warning"):this.$com.showToast("请上传 png、jpg格式!","warning")},_CommonUpload:function(e){var i=this;this.$api.CommonUpload(e).then(function(e){401!=e.code?1==e.code&&(i.$com.showToast("上传成功！","success"),i.imgs.push(e.data.url)):i.$router.push("/login")})},feedback_fn:function(){var e=this;""==this.ruleForm.message?this.$com.showtoast("请输入内容"):this.$api.SetFeedback(this.ruleForm.message,this.imgs.toString()).then(function(i){1==i.code&&(e.$com.showToast("提交成功","success"),e.$refs.ruleForm.resetFields())})}}},s,!1,function(e){t("C6s1")},"data-v-0ce7ab17",null);i.default=a.exports}});