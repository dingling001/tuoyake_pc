webpackJsonp([6],{"/05r":function(e,t){},YOAI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"myAddress",data:function(){return{tableData:[],tabelshow:!1,dialogFormVisible:!1}},components:{Taddress:a("uN9M").a},created:function(){this._AddressIndex()},methods:{_AddressIndex:function(){var e=this;this.$api.AddressIndex().then(function(t){e.tabelshow=!0,1==t.code&&(e.tableData=t.data)})},onEdit:function(){},choosedefault:function(e,t){var a=this;this.$api.AddressSetAddress(e.name,e.mobile,e.province,e.city,e.district,e.address,1,e.id).then(function(e){1==e.code?(a.$com.showToast("已设置为默认地址","success"),a._AddressIndex()):a.$com.showToast(e.msg||"稍后再试！")})},_addressDel:function(e){var t=this;this.$confirm("此操作将删除该地址, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delconfirm(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delconfirm:function(e){var t=this;this.$api.addressDel(e).then(function(e){1==e.code&&(t.$com.showToast("删除成功","success"),t._AddressIndex())})},add:function(e){this._AddressIndex()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myadd"},[e._m(0),e._v(" "),e.tabelshow&&e.tableData.length?a("el-table",{attrs:{data:e.tableData,center:"",border:""}},[a("el-table-column",{attrs:{property:"name",label:"联系人",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"mobile",label:"电话",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.province)+e._s(t.row.city)+e._s(t.row.district)+e._s(t.row.address)+"\n      ")]}}],null,!1,363198998)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e._addressDel(t.row.id)}}},[e._v("删除")])]}}],null,!1,916771993)}),e._v(" "),a("el-table-column",{attrs:{label:"默认地址",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:["checkbox iconfont",1==t.row.is_default?"iconxuanzhong":"iconweixuanzhong"],on:{click:function(a){return e.choosedefault(t.row,t.$index)}}})]}}],null,!1,4108701182)})],1):e._e(),e._v(" "),e.tabelshow&&0==e.tableData.length?a("div",{staticClass:"nodata"},[a("NoData",{attrs:{text:"还没有添加地址"}})],1):e._e(),e._v(" "),a("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("+新建地址")]),e._v(" "),a("Taddress",{attrs:{show:e.dialogFormVisible},on:{"update:show":function(t){e.dialogFormVisible=t},add:e.add}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"score_top"},[t("div",{staticClass:"iconbox"},[t("div",{staticClass:"name"},[this._v("地址设置")])])])}]};var o=a("VU/8")(r,n,!1,function(e){a("bPRo")},"data-v-077c1cc6",null);t.default=o.exports},bPRo:function(e,t){},uN9M:function(e,t,a){"use strict";var r=a("Xxa5"),n=a.n(r),o=a("exGp"),s=a.n(o),l=a("+84l"),i=a.n(l),c={name:"Taddress",data:function(){var e=this;return{visible:this.show,form:{name:"",desc:"",tel:"",pvalue:"",cvalue:"",dvalue:""},rules:{name:[{required:!0,message:"请输入联系人",trigger:"blur"}],tel:{validator:function(t,a,r){""===a?r(new Error("请输入联系方式")):e.$com.checkPhone(e.ruleForm.account)?r():r(new Error("请输入联系方式不正确"))},trigger:"blur",required:!0},pvalue:[{required:!0,message:"请选择省",trigger:"change"}],cvalue:[{required:!0,message:"请选择市",trigger:"change"}],dvalue:[{required:!0,message:"请选择地区",trigger:"change"}],desc:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},province:[],city:[],district:[],is_default:0,id:""}},props:{show:{type:Boolean,default:!1}},mounted:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.province=i.a.data.map(function(e){return{value:e.id,label:e.name,cityArr:e.cityArr}});case 1:case"end":return t.stop()}},t,e)}))()},watch:{show:function(){this.visible=this.show}},methods:{accountinput:function(){this.form.tel=this.form.tel.replace(/[^\d]/g,"")},changeprov:function(e){var t=this;this.city=[],this.district=[],this.form.cvalue="",this.form.dvalue="",this.province.map(function(a,r){a.label==e&&(t.city=t.province[r].cityArr.map(function(e){return{value:e.id,label:e.name}}))})},changecity:function(e){var t=this;this.district=[],this.form.dvalue="",this.$api.GetAreaPidByName(e).then(function(e){t.$api.GetAreaListTree(e.data).then(function(e){t.district=e.data})})},changedistrict:function(e){this.form.dvalue=e},add_address:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;alert("submit!"),e.$api.AddressSetAddress(e.form.name,e.form.tel,e.form.pvalue,e.form.cvalue,e.form.dvalue,e.form.desc,e.is_default,e.id).then(function(t){1==t.code?(e.visible=!1,e.$com.showToast("添加成功","success"),e.$emit("add",1)):e.$com.showToast(t.msg||"稍后再试！")})})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新建地址",visible:e.visible,width:"1140px",show:e.show,center:""},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("update:show",!1)}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"联系人",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{attrs:{autocomplete:"off",maxlength:"11"},on:{input:e.accountinput},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",required:""}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{prop:"pvalue"}},[a("el-select",{attrs:{placeholder:"省份"},on:{change:e.changeprov},model:{value:e.form.pvalue,callback:function(t){e.$set(e.form,"pvalue",t)},expression:"form.pvalue"}},e._l(e.province,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{prop:"cvalue"}},[a("el-select",{attrs:{disabled:!e.city.length,placeholder:"城市"},on:{change:e.changecity},model:{value:e.form.cvalue,callback:function(t){e.$set(e.form,"cvalue",t)},expression:"form.cvalue"}},e._l(e.city,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{prop:"dvalue"}},[a("el-select",{attrs:{disabled:!e.district.length,placeholder:"区"},on:{change:e.changedistrict},model:{value:e.form.dvalue,callback:function(t){e.$set(e.form,"dvalue",t)},expression:"form.dvalue"}},e._l(e.district,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详情地址",prop:"desc"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.add_address}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("/05r")},"data-v-02424c79",null);t.a=d.exports}});